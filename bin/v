#!/bin/bash

here=$(pwd)

if [[ -z "$1" ]]; then
  envs=$(/bin/ls -1 $here/.env_* 2>&1)
  if [[ $? -ne 0 ]]; then
    echo 'No .env files found.' >&2
    exit 1
  else
    link=$(readlink $here/.env)
    for e in $(echo $envs); do
      echo -n $(basename $(echo $e | sed 's/.env_//g'))
      if [[ $link == $e ]]; then
        echo '*'
      else
        echo ''
      fi
    done
  fi
else
  /bin/ln -sfv $here/.env_$1 $here/.env
fi
